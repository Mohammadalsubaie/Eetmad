# إنشاء طلب جديد - Create New Request Flow

## نظرة عامة
تدفق كامل لإنشاء طلب جديد من العميل، يغطي جميع الخطوات والتحققات.

---

## خريطة التدفق

```mermaid
graph TD
    START([Dashboard]) --> A[انقر: طلب جديد]

    A --> B[الخطوة 1: معلومات أساسية]
    B --> C[إدخال العنوان]
    C --> D{العنوان صحيح؟}
    D -->|لا| E[تحذير: العنوان قصير جداً]
    E --> C
    D -->|نعم| F[اختيار الفئة]

    F --> G{فئة محددة؟}
    G -->|لا| H[تحذير: اختر فئة]
    H --> F
    G -->|نعم| I[إدخال الوصف التفصيلي]

    I --> J{الوصف كافٍ؟}
    J -->|لا| K[تحذير: الوصف قصير - 100 حرف على الأقل]
    K --> I
    J -->|نعم| L[التالي: الخطوة 2]

    L --> M[الخطوة 2: المتطلبات]
    M --> N[كتابة المواصفات]
    N --> O[رفع مرفقات]
    O --> P{حجم الملفات؟}
    P -->"> 50 MB"--> Q[خطأ: حجم الملفات كبير]
    Q --> O
    P -->"< 50 MB"--> R[إضافة أمثلة/روابط]
    R --> S[التالي: الخطوة 3]

    S --> T[الخطوة 3: التفاصيل المالية]
    T --> U[إدخال الميزانية من]
    U --> V[إدخال الميزانية إلى]
    V --> W{"المن < الإلى؟"}
    W -->|لا| X[خطأ: الميزانية غير صحيحة]
    X --> U
    W -->|نعم| Y{الميزانية معقولة؟}
    Y -->"< 500 ريال"--> Z[تحذير: الميزانية منخفضة جداً]
    Y -->"> 1,000,000"--> AA[تحذير: الميزانية مرتفعة - تواصل معنا]
    Y -->|معقولة| AB[اختيار نوع الدفع]

    Z --> AB
    AA --> AB

    AB --> AC{نوع الدفع}
    AC -->|كامل| AD[الدفع بالكامل عند الإنجاز]
    AC -->|أقساط| AE[تحديد عدد الأقساط]

    AD --> AF[إدخال نسبة العربون]
    AE --> AG[تحديد نسبة كل قسط]
    AG --> AF

    AF --> AH{العربون 0-50%؟}
    AH -->|لا| AI[خطأ: العربون يجب أن يكون 0-50%]
    AI --> AF
    AH -->|نعم| AJ[التالي: الخطوة 4]

    AJ --> AK[الخطوة 4: الجدول الزمني]
    AK --> AL[تاريخ البدء المتوقع]
    AL --> AM{التاريخ صحيح؟}
    AM -->|في الماضي| AN[خطأ: اختر تاريخ في المستقبل]
    AN --> AL
    AM -->|صحيح| AO[المدة المتوقعة - بالأيام]

    AO --> AP{المدة معقولة؟}
    AP -->"< 1 يوم"--> AQ[خطأ: المدة قصيرة جداً]
    AQ --> AO
    AP -->"> 365 يوم"--> AR[تحذير: المدة طويلة - متأكد؟]
    AP -->|معقولة| AS[حساب تاريخ الانتهاء تلقائياً]

    AR --> AS
    AS --> AT[آخر موعد لاستقبال العروض]
    AT --> AU[التالي: الخطوة 5]

    AU --> AV[الخطوة 5: المراجعة]
    AV --> AW[عرض كل التفاصيل]
    AW --> AX{مراجعة كاملة؟}

    AX -->|تعديل| AY{أي خطوة؟}
    AY -->|1| B
    AY -->|2| M
    AY -->|3| T
    AY -->|4| AK

    AX -->|حفظ مسودة| AZ[حفظ في المسودات]
    AZ --> BA[رسالة: تم الحفظ]
    BA --> BB[العودة للمسودات]

    AX -->|نشر| BC{التأكيد}
    BC -->|إلغاء| AW
    BC -->|تأكيد| BD[نشر الطلب]

    BD --> BE{النشر ناجح؟}
    BE -->|خطأ في الاتصال| BF[خطأ: فشل النشر]
    BF --> BG[إعادة المحاولة]
    BG --> BD

    BE -->|ناجح| BH[رسالة: تم نشر الطلب بنجاح]
    BH --> BI[إرسال إشعار للموردين]
    BI --> BJ[التوجيه لصفحة الطلب]
    BJ --> BK[بدء استقبال العروض]
```

---

## الخطوات الرئيسية

### 1️⃣ المعلومات الأساسية
- عنوان الطلب (20 حرف على الأقل)
- الفئة المناسبة
- وصف تفصيلي (100 حرف على الأقل)

### 2️⃣ المتطلبات
- المواصفات الفنية
- المرفقات (حد أقصى 50 MB)
- أمثلة وروابط مرجعية

### 3️⃣ التفاصيل المالية
- نطاق الميزانية
- نوع الدفع (كامل/أقساط)
- نسبة العربون (0-50%)

### 4️⃣ الجدول الزمني
- تاريخ البدء المتوقع
- المدة المتوقعة
- آخر موعد لاستقبال العروض

### 5️⃣ المراجعة والنشر
- مراجعة جميع التفاصيل
- حفظ كمسودة أو نشر مباشرة
